<!--pages/list/list.wxml-->
<!--index.wxml-->
<import src="../../temp/loading.wxml" />
<import src="../../temp/showerror.wxml" />
<import src="../../temp/itemcell.wxml" />
<import src="../../temp/cats.wxml" />

<view class="wrapper bgcolor-base"></view>

<navtitle id="c-bar" title="" isshare="{{isshare}}" isActive="{{isActive}}" isGoback="{{isGoback}}" showLoad="{{showLoad}}"/>

<view class="container bgcolor-base page">
  <view class="index" style="padding-bottom:calc(96rpx + env(safe-area-inset-bottom));padding-top: {{customBarHeight}}px;">
    <view class="menubarwrap {{isshowCnt?'show':'hide'}}">
      <view class="menubarhead" wx:if="{{listtype=='category'}}">
        <view class="tit">
          <block wx:if="{{posttype=='star'}}">
            <text class="text">星档案</text>
          </block>
          <block wx:elif="{{posttype=='movie'}}">
            <text class="text">库</text>
          </block>
        </view>
        <view class="more" catchtap="bindShowpop">
          <text class="text">{{catetitle}}</text>
          </view>
      </view>
      <view class="menubarhead" wx:if="{{listtype=='search'}}">
        <view class="tit">
          <block wx:if="{{posttype=='posts'}}">
            <text class="text">在福利社中</text>
          </block>
          <block wx:elif="{{posttype=='source'}}">
            <text class="text">在作品中</text>
          </block>
          <block wx:elif="{{posttype=='appver'}}">
            <text class="text">在应用中</text>
          </block>
        </view>
        <view class="desc">
          <text class="text">{{searchtitle}}</text>
        </view>
      </view>
    </view>
    <view class="index_article itemarea {{isshowCnt?'show':'hide'}}" wx:if="{{posts.length>0}}">
      <template is="posts" data="{{posts,customBarHeight,windowWidth}}" />
    
    </view>
    <view class="index_article {{isshowCnt?'show':'hide'}}" wx:if="{{isLastPage&&posts.length==0}}">
      <view class="noncnt">
        <icon class="icon iconfont icon-noncnt" />
      </view>
      <view class="last_text">对不起! 你查看的内容没有找到</view>
    </view>
    <view class="last_text" wx:if="{{isLastPage&&posts.length>0}}">已经到底啦~</view>
    <view class="last_text" wx:if="{{!isLastPage&&posts.length>0}}">
      <block wx:if="{{lasttip==true}}">
						<icon class="icon iconfont icon-loading turn" />
						<text class="text">加载更多内容中...</text>
					</block>
					<block wx:else>
						<icon class="icon iconfont icon-error" />
						<text class="text">出错啦！无法连接数据</text>
					</block>
    </view>
  </view>

  <template is="showerror" data="{{isshowError:isshowError}}"></template>

</view>

<view class="popuparea {{showpop ? 'show':''}}">
  <view class="popupareahead bgcolor-base-op95">
    <template is="cats" data="{{category:category}}" />
  </view>
  <view class="popupareafoot bgcolor-sub" catchtap="bindHidepop">
    <text class="text">取消</text>
  </view>
</view>
<view class="popupbg {{showpop ? 'show':''}}" catchtap="bindHidepop"></view>

<template is="loading" data="{{isshowLoad:isshowLoad}}"></template>